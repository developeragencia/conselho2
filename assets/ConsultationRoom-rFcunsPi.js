import{f as H,F as Ce,r as a,G as z,j as e,P as O,K as W,J as _,Z as L,_ as Ne,O as ie,w as Pe,l as Ee,z as Re,u as G,n as J,C as U,d as B,e as N,B as Te,a as ee,b as te,V as F,o as Ae,I as Le,p as re}from"./index-DOubVUE4.js";import{S as _e}from"./separator-DZDDqmAQ.js";import{u as ke}from"./index-bmbOTAqj.js";import{c as Me}from"./index-BdQq_4o_.js";import{U as De}from"./user-Bgp2XcVx.js";import{S as ze}from"./star-xF0HenbB.js";import{C as Oe}from"./clock-V1-wi2yJ.js";import{C as Ie}from"./credit-card-Bdig2MG1.js";import{S as Ve}from"./send-DuwltT5H.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=H("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=H("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=H("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=H("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function He(t,o){return a.useReducer((r,l)=>o[r][l]??r,t)}var $="ScrollArea",[ce,it]=Ce($),[We,S]=ce($),de=a.forwardRef((t,o)=>{const{__scopeScrollArea:r,type:l="hover",dir:s,scrollHideDelay:n=600,...c}=t,[i,d]=a.useState(null),[f,u]=a.useState(null),[x,h]=a.useState(null),[v,p]=a.useState(null),[P,k]=a.useState(null),[j,y]=a.useState(0),[E,R]=a.useState(0),[T,C]=a.useState(!1),[A,M]=a.useState(!1),m=z(o,w=>d(w)),b=ke(s);return e.jsx(We,{scope:r,type:l,dir:b,scrollHideDelay:n,scrollArea:i,viewport:f,onViewportChange:u,content:x,onContentChange:h,scrollbarX:v,onScrollbarXChange:p,scrollbarXEnabled:T,onScrollbarXEnabledChange:C,scrollbarY:P,onScrollbarYChange:k,scrollbarYEnabled:A,onScrollbarYEnabledChange:M,onCornerWidthChange:y,onCornerHeightChange:R,children:e.jsx(O.div,{dir:b,...c,ref:m,style:{position:"relative","--radix-scroll-area-corner-width":j+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});de.displayName=$;var ue="ScrollAreaViewport",he=a.forwardRef((t,o)=>{const{__scopeScrollArea:r,children:l,nonce:s,...n}=t,c=S(ue,r),i=a.useRef(null),d=z(o,i,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(O.div,{"data-radix-scroll-area-viewport":"",...n,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});he.displayName=ue;var g="ScrollAreaScrollbar",q=a.forwardRef((t,o)=>{const{forceMount:r,...l}=t,s=S(g,t.__scopeScrollArea),{onScrollbarXEnabledChange:n,onScrollbarYEnabledChange:c}=s,i=t.orientation==="horizontal";return a.useEffect(()=>(i?n(!0):c(!0),()=>{i?n(!1):c(!1)}),[i,n,c]),s.type==="hover"?e.jsx(Xe,{...l,ref:o,forceMount:r}):s.type==="scroll"?e.jsx(Ye,{...l,ref:o,forceMount:r}):s.type==="auto"?e.jsx(me,{...l,ref:o,forceMount:r}):s.type==="always"?e.jsx(K,{...l,ref:o}):null});q.displayName=g;var Xe=a.forwardRef((t,o)=>{const{forceMount:r,...l}=t,s=S(g,t.__scopeScrollArea),[n,c]=a.useState(!1);return a.useEffect(()=>{const i=s.scrollArea;let d=0;if(i){const f=()=>{window.clearTimeout(d),c(!0)},u=()=>{d=window.setTimeout(()=>c(!1),s.scrollHideDelay)};return i.addEventListener("pointerenter",f),i.addEventListener("pointerleave",u),()=>{window.clearTimeout(d),i.removeEventListener("pointerenter",f),i.removeEventListener("pointerleave",u)}}},[s.scrollArea,s.scrollHideDelay]),e.jsx(W,{present:r||n,children:e.jsx(me,{"data-state":n?"visible":"hidden",...l,ref:o})})}),Ye=a.forwardRef((t,o)=>{const{forceMount:r,...l}=t,s=S(g,t.__scopeScrollArea),n=t.orientation==="horizontal",c=Y(()=>d("SCROLL_END"),100),[i,d]=He("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return a.useEffect(()=>{if(i==="idle"){const f=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(f)}},[i,s.scrollHideDelay,d]),a.useEffect(()=>{const f=s.viewport,u=n?"scrollLeft":"scrollTop";if(f){let x=f[u];const h=()=>{const v=f[u];x!==v&&(d("SCROLL"),c()),x=v};return f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[s.viewport,n,d,c]),e.jsx(W,{present:r||i!=="hidden",children:e.jsx(K,{"data-state":i==="hidden"?"hidden":"visible",...l,ref:o,onPointerEnter:_(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:_(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),me=a.forwardRef((t,o)=>{const r=S(g,t.__scopeScrollArea),{forceMount:l,...s}=t,[n,c]=a.useState(!1),i=t.orientation==="horizontal",d=Y(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;c(i?f:u)}},10);return D(r.viewport,d),D(r.content,d),e.jsx(W,{present:l||n,children:e.jsx(K,{"data-state":n?"visible":"hidden",...s,ref:o})})}),K=a.forwardRef((t,o)=>{const{orientation:r="vertical",...l}=t,s=S(g,t.__scopeScrollArea),n=a.useRef(null),c=a.useRef(0),[i,d]=a.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=be(i.viewport,i.content),u={...l,sizes:i,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:h=>n.current=h,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:h=>c.current=h};function x(h,v){return Ke(h,c.current,i,v)}return r==="horizontal"?e.jsx(Ue,{...u,ref:o,onThumbPositionChange:()=>{if(s.viewport&&n.current){const h=s.viewport.scrollLeft,v=ae(h,i,s.dir);n.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=x(h,s.dir))}}):r==="vertical"?e.jsx(Be,{...u,ref:o,onThumbPositionChange:()=>{if(s.viewport&&n.current){const h=s.viewport.scrollTop,v=ae(h,i);n.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=x(h))}}):null}),Ue=a.forwardRef((t,o)=>{const{sizes:r,onSizesChange:l,...s}=t,n=S(g,t.__scopeScrollArea),[c,i]=a.useState(),d=a.useRef(null),f=z(o,d,n.onScrollbarXChange);return a.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),e.jsx(xe,{"data-orientation":"horizontal",...s,ref:f,sizes:r,style:{bottom:0,left:n.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:n.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":X(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,x)=>{if(n.viewport){const h=n.viewport.scrollLeft+u.deltaX;t.onWheelScroll(h),we(h,x)&&u.preventDefault()}},onResize:()=>{d.current&&n.viewport&&c&&l({content:n.viewport.scrollWidth,viewport:n.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:V(c.paddingLeft),paddingEnd:V(c.paddingRight)}})}})}),Be=a.forwardRef((t,o)=>{const{sizes:r,onSizesChange:l,...s}=t,n=S(g,t.__scopeScrollArea),[c,i]=a.useState(),d=a.useRef(null),f=z(o,d,n.onScrollbarYChange);return a.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),e.jsx(xe,{"data-orientation":"vertical",...s,ref:f,sizes:r,style:{top:0,right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":X(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,x)=>{if(n.viewport){const h=n.viewport.scrollTop+u.deltaY;t.onWheelScroll(h),we(h,x)&&u.preventDefault()}},onResize:()=>{d.current&&n.viewport&&c&&l({content:n.viewport.scrollHeight,viewport:n.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:V(c.paddingTop),paddingEnd:V(c.paddingBottom)}})}})}),[Fe,fe]=ce(g),xe=a.forwardRef((t,o)=>{const{__scopeScrollArea:r,sizes:l,hasThumb:s,onThumbChange:n,onThumbPointerUp:c,onThumbPointerDown:i,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:u,onResize:x,...h}=t,v=S(g,r),[p,P]=a.useState(null),k=z(o,m=>P(m)),j=a.useRef(null),y=a.useRef(""),E=v.viewport,R=l.content-l.viewport,T=L(u),C=L(d),A=Y(x,10);function M(m){if(j.current){const b=m.clientX-j.current.left,w=m.clientY-j.current.top;f({x:b,y:w})}}return a.useEffect(()=>{const m=b=>{const w=b.target;(p==null?void 0:p.contains(w))&&T(b,R)};return document.addEventListener("wheel",m,{passive:!1}),()=>document.removeEventListener("wheel",m,{passive:!1})},[E,p,R,T]),a.useEffect(C,[l,C]),D(p,A),D(v.content,A),e.jsx(Fe,{scope:r,scrollbar:p,hasThumb:s,onThumbChange:L(n),onThumbPointerUp:L(c),onThumbPositionChange:C,onThumbPointerDown:L(i),children:e.jsx(O.div,{...h,ref:k,style:{position:"absolute",...h.style},onPointerDown:_(t.onPointerDown,m=>{m.button===0&&(m.target.setPointerCapture(m.pointerId),j.current=p.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),M(m))}),onPointerMove:_(t.onPointerMove,M),onPointerUp:_(t.onPointerUp,m=>{const b=m.target;b.hasPointerCapture(m.pointerId)&&b.releasePointerCapture(m.pointerId),document.body.style.webkitUserSelect=y.current,v.viewport&&(v.viewport.style.scrollBehavior=""),j.current=null})})})}),I="ScrollAreaThumb",pe=a.forwardRef((t,o)=>{const{forceMount:r,...l}=t,s=fe(I,t.__scopeScrollArea);return e.jsx(W,{present:r||s.hasThumb,children:e.jsx($e,{ref:o,...l})})}),$e=a.forwardRef((t,o)=>{const{__scopeScrollArea:r,style:l,...s}=t,n=S(I,r),c=fe(I,r),{onThumbPositionChange:i}=c,d=z(o,x=>c.onThumbChange(x)),f=a.useRef(void 0),u=Y(()=>{f.current&&(f.current(),f.current=void 0)},100);return a.useEffect(()=>{const x=n.viewport;if(x){const h=()=>{if(u(),!f.current){const v=Qe(x,i);f.current=v,i()}};return i(),x.addEventListener("scroll",h),()=>x.removeEventListener("scroll",h)}},[n.viewport,u,i]),e.jsx(O.div,{"data-state":c.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:_(t.onPointerDownCapture,x=>{const v=x.target.getBoundingClientRect(),p=x.clientX-v.left,P=x.clientY-v.top;c.onThumbPointerDown({x:p,y:P})}),onPointerUp:_(t.onPointerUp,c.onThumbPointerUp)})});pe.displayName=I;var Q="ScrollAreaCorner",ve=a.forwardRef((t,o)=>{const r=S(Q,t.__scopeScrollArea),l=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&l?e.jsx(qe,{...t,ref:o}):null});ve.displayName=Q;var qe=a.forwardRef((t,o)=>{const{__scopeScrollArea:r,...l}=t,s=S(Q,r),[n,c]=a.useState(0),[i,d]=a.useState(0),f=!!(n&&i);return D(s.scrollbarX,()=>{var x;const u=((x=s.scrollbarX)==null?void 0:x.offsetHeight)||0;s.onCornerHeightChange(u),d(u)}),D(s.scrollbarY,()=>{var x;const u=((x=s.scrollbarY)==null?void 0:x.offsetWidth)||0;s.onCornerWidthChange(u),c(u)}),f?e.jsx(O.div,{...l,ref:o,style:{width:n,height:i,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function V(t){return t?parseInt(t,10):0}function be(t,o){const r=t/o;return isNaN(r)?0:r}function X(t){const o=be(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=(t.scrollbar.size-r)*o;return Math.max(l,18)}function Ke(t,o,r,l="ltr"){const s=X(r),n=s/2,c=o||n,i=s-c,d=r.scrollbar.paddingStart+c,f=r.scrollbar.size-r.scrollbar.paddingEnd-i,u=r.content-r.viewport,x=l==="ltr"?[0,u]:[u*-1,0];return Se([d,f],x)(t)}function ae(t,o,r="ltr"){const l=X(o),s=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,n=o.scrollbar.size-s,c=o.content-o.viewport,i=n-l,d=r==="ltr"?[0,c]:[c*-1,0],f=Me(t,d);return Se([0,c],[0,i])(f)}function Se(t,o){return r=>{if(t[0]===t[1]||o[0]===o[1])return o[0];const l=(o[1]-o[0])/(t[1]-t[0]);return o[0]+l*(r-t[0])}}function we(t,o){return t>0&&t<o}var Qe=(t,o=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},l=0;return function s(){const n={left:t.scrollLeft,top:t.scrollTop},c=r.left!==n.left,i=r.top!==n.top;(c||i)&&o(),r=n,l=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(l)};function Y(t,o){const r=L(t),l=a.useRef(0);return a.useEffect(()=>()=>window.clearTimeout(l.current),[]),a.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(r,o)},[r,o])}function D(t,o){const r=L(o);Ne(()=>{let l=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(l),s.unobserve(t)}}},[t,r])}var ge=de,Ze=he,Ge=ve;const je=a.forwardRef(({className:t,children:o,...r},l)=>e.jsxs(ge,{ref:l,className:ie("relative overflow-hidden",t),...r,children:[e.jsx(Ze,{className:"h-full w-full rounded-[inherit]",children:o}),e.jsx(ye,{}),e.jsx(Ge,{})]}));je.displayName=ge.displayName;const ye=a.forwardRef(({className:t,orientation:o="vertical",...r},l)=>e.jsx(q,{ref:l,orientation:o,className:ie("flex touch-none select-none transition-colors",o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(pe,{className:"relative flex-1 rounded-full bg-border"})}));ye.displayName=q.displayName;function ct(){const[t,o]=Pe("/consultation/:roomId"),r=o==null?void 0:o.roomId,[l,s]=a.useState(""),[n,c]=a.useState(!1),[i,d]=a.useState(!1),[f,u]=a.useState(0),x=a.useRef(null),{toast:h}=Ee(),v=Re(),{data:p,isLoading:P}=G({queryKey:["/api/consultation/room",r],enabled:!!r}),{data:k=[],isLoading:j}=G({queryKey:["/api/consultation/messages",r],enabled:!!r,refetchInterval:2e3}),y=J({mutationFn:m=>re("POST","/api/consultation/message",m),onSuccess:()=>{s(""),v.invalidateQueries({queryKey:["/api/consultation/messages",r]})},onError:m=>{h({title:"Erro ao enviar mensagem",description:"Tente novamente em alguns segundos",variant:"destructive"})}}),E=J({mutationFn:()=>re("POST",`/api/consultation/end/${r}`),onSuccess:()=>{h({title:"Consulta finalizada",description:"Obrigado por usar nossos serviços!"}),window.location.href="/cliente"}});a.useEffect(()=>{if((p==null?void 0:p.status)==="active"){const m=new Date(p.startedAt).getTime(),b=setInterval(()=>{const w=Date.now(),Z=Math.floor((w-m)/1e3);u(Z)},1e3);return()=>clearInterval(b)}},[p]),a.useEffect(()=>{var m;(m=x.current)==null||m.scrollIntoView({behavior:"smooth"})},[k]);const R=()=>{!l.trim()||!r||y.mutate({roomId:r,messageType:"text",content:l})},T=()=>{c(!n),h({title:n?"Vídeo desativado":"Vídeo ativado",description:n?"Sua câmera foi desligada":"Sua câmera foi ligada"})},C=()=>{d(!i),h({title:i?"Áudio desativado":"Áudio ativado",description:i?"Seu microfone foi desligado":"Seu microfone foi ligado"})},A=m=>{const b=Math.floor(m/60),w=m%60;return`${b.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`},M=()=>p?(Math.ceil(f/60)*p.creditsPerMinute).toFixed(2):0;return P?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-purple-500 border-t-transparent rounded-full"})}):p?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-purple-500 to-blue-500 flex items-center justify-center",children:e.jsx(De,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:p.consultant.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Te,{variant:"secondary",children:p.consultant.specialty}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ze,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-sm text-gray-600 ml-1",children:p.consultant.rating})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center text-lg font-semibold",children:[e.jsx(Oe,{className:"w-5 h-5 mr-2"}),A(f)]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tempo de sessão"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center text-lg font-semibold text-purple-600",children:[e.jsx(Ie,{className:"w-5 h-5 mr-2"}),"R$ ",M()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Custo atual"})]}),e.jsxs(N,{variant:"destructive",onClick:()=>E.mutate(),disabled:E.isPending,children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Finalizar"]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(U,{className:"h-[600px] flex flex-col",children:[e.jsx(ee,{className:"flex-shrink-0",children:e.jsxs(te,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Consulta em Andamento"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{variant:n?"default":"outline",size:"sm",onClick:T,children:n?e.jsx(F,{className:"w-4 h-4"}):e.jsx(le,{className:"w-4 h-4"})}),e.jsx(N,{variant:i?"default":"outline",size:"sm",onClick:C,children:i?e.jsx(se,{className:"w-4 h-4"}):e.jsx(oe,{className:"w-4 h-4"})})]})]})}),e.jsxs(B,{className:"flex-1 flex flex-col p-0",children:[e.jsxs("div",{className:"flex-1 bg-gray-900 relative flex items-center justify-center",children:[e.jsxs("div",{className:"text-white text-center",children:[e.jsx(F,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsxs("p",{className:"text-lg",children:["Consulta por ",p.roomType]}),e.jsx("p",{className:"text-sm opacity-75",children:n?"Vídeo ativado":"Vídeo desativado"})]}),e.jsx("div",{className:"absolute top-4 right-4 bg-black bg-opacity-50 px-3 py-1 rounded",children:e.jsx("span",{className:"text-white font-mono",children:A(f)})})]}),e.jsxs("div",{className:"p-4 bg-gray-50 flex justify-center space-x-4",children:[e.jsx(N,{variant:i?"default":"destructive",onClick:C,className:"rounded-full w-12 h-12",children:i?e.jsx(se,{className:"w-5 h-5"}):e.jsx(oe,{className:"w-5 h-5"})}),e.jsx(N,{variant:n?"default":"secondary",onClick:T,className:"rounded-full w-12 h-12",children:n?e.jsx(F,{className:"w-5 h-5"}):e.jsx(le,{className:"w-5 h-5"})}),e.jsx(N,{variant:"destructive",onClick:()=>E.mutate(),className:"rounded-full w-12 h-12",children:e.jsx(ne,{className:"w-5 h-5"})})]})]})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs(U,{className:"h-[600px] flex flex-col",children:[e.jsx(ee,{className:"flex-shrink-0",children:e.jsxs(te,{className:"flex items-center",children:[e.jsx(Ae,{className:"w-5 h-5 mr-2"}),"Chat da Consulta"]})}),e.jsxs(B,{className:"flex-1 flex flex-col p-0",children:[e.jsx(je,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-4",children:[k.map(m=>e.jsx("div",{className:`flex ${m.senderType==="client"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${m.senderType==="client"?"bg-purple-500 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm",children:m.content}),e.jsx("p",{className:"text-xs opacity-75 mt-1",children:new Date(m.timestamp).toLocaleTimeString()})]})},m.id)),e.jsx("div",{ref:x})]})}),e.jsx(_e,{}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Le,{placeholder:"Digite sua mensagem...",value:l,onChange:m=>s(m.target.value),onKeyPress:m=>{m.key==="Enter"&&R()},disabled:y.isPending}),e.jsx(N,{onClick:R,disabled:!l.trim()||y.isPending,size:"sm",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]})]})})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(U,{className:"max-w-md",children:e.jsxs(B,{className:"p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Sala não encontrada"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"A sala de consulta não existe ou foi finalizada."}),e.jsx(N,{onClick:()=>window.location.href="/",children:"Voltar ao início"})]})})})}export{ct as default};
